[tox]
skipsdist=True
envlist=pycodestyle,pylint,yamllint,policy

[test-deps]
deps =
  -cconstraints.txt
  -raws/requirements.txt

[test-deps:pylint]
description = Check with Pylint
deps =
  {[test-deps]deps}
  pylint
commands = pylint --rcfile {toxinidir}/hacking/pylint.rc {toxinidir}/aws

[test-deps:pycodestyle]
description = Check with pycodestyle
deps =
  {[test-deps]deps}
  pycodestyle
commands = pycodestyle --config {toxinidir}/pycodestyle.ini {toxinidir}/aws

[test-deps:yamllint]
description = Check with YAMLlint
deps =
  {[test-deps]deps}
  yamllint
commands = yamllint --config-file {toxinidir}/.yamllint {toxinidir}/aws {toxinidir}/hacking

[test-deps:policy]
description = Run the test-policies playbook
deps =
  {[test-deps]deps}
  ansible-core
commands = ansible-playbook -i localhost {toxinidir}/hacking/aws_config/test-policies.yml
